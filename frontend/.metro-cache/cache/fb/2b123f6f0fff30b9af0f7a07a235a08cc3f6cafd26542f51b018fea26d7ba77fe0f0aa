{"dependencies":[{"name":"firebase/auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":8,"column":23,"index":154}}],"key":"o2UvaebosmgxImAY7KlhPO3FnYs=","exportNames":["*"],"imports":1}},{"name":"firebase/firestore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":155},"end":{"line":9,"column":85,"index":240}}],"key":"n8ZdwTgQb9oFW01pH/SKxYwC/nA=","exportNames":["*"],"imports":1}},{"name":"../config/firebase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":241},"end":{"line":10,"column":46,"index":287}}],"key":"K/SZPG5sPeV1upVh8dao26aG7MQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"loginUser\", {\n    enumerable: true,\n    get: function () {\n      return loginUser;\n    }\n  });\n  Object.defineProperty(exports, \"registerAdmin\", {\n    enumerable: true,\n    get: function () {\n      return registerAdmin;\n    }\n  });\n  Object.defineProperty(exports, \"logoutUser\", {\n    enumerable: true,\n    get: function () {\n      return logoutUser;\n    }\n  });\n  Object.defineProperty(exports, \"getCurrentUserProfile\", {\n    enumerable: true,\n    get: function () {\n      return getCurrentUserProfile;\n    }\n  });\n  Object.defineProperty(exports, \"onAuthChange\", {\n    enumerable: true,\n    get: function () {\n      return onAuthChange;\n    }\n  });\n  Object.defineProperty(exports, \"seedSuperAdmin\", {\n    enumerable: true,\n    get: function () {\n      return seedSuperAdmin;\n    }\n  });\n  var _firebaseAuth = require(_dependencyMap[0], \"firebase/auth\");\n  var _firebaseFirestore = require(_dependencyMap[1], \"firebase/firestore\");\n  var _configFirebase = require(_dependencyMap[2], \"../config/firebase\");\n  // Superadmin credentials\n  const SUPERADMIN_EMAIL = 'joni@email.com';\n  const SUPERADMIN_PASSWORD = 'joni2#Marjoni';\n\n  // Login\n  const loginUser = async (email, password) => {\n    try {\n      const userCredential = await (0, _firebaseAuth.signInWithEmailAndPassword)(_configFirebase.auth, email, password);\n      const user = userCredential.user;\n\n      // Get user profile from Firestore\n      let userDoc = await (0, _firebaseFirestore.getDoc)((0, _firebaseFirestore.doc)(_configFirebase.db, 'users', user.uid));\n\n      // If profile doesn't exist, create it (for superadmin first login)\n      if (!userDoc.exists()) {\n        const newProfile = {\n          uid: user.uid,\n          email: user.email,\n          displayName: email === SUPERADMIN_EMAIL ? 'Super Admin' : user.displayName || 'Admin User',\n          role: email === SUPERADMIN_EMAIL ? 'superadmin' : 'admin',\n          createdAt: (0, _firebaseFirestore.serverTimestamp)(),\n          updatedAt: (0, _firebaseFirestore.serverTimestamp)()\n        };\n        await (0, _firebaseFirestore.setDoc)((0, _firebaseFirestore.doc)(_configFirebase.db, 'users', user.uid), newProfile);\n        userDoc = await (0, _firebaseFirestore.getDoc)((0, _firebaseFirestore.doc)(_configFirebase.db, 'users', user.uid));\n      }\n      return {\n        user,\n        profile: userDoc.data()\n      };\n    } catch (error) {\n      throw new Error(error.message);\n    }\n  };\n\n  // Register new admin user (only by superadmin or admin)\n  const registerAdmin = async (email, password, displayName, createdBy) => {\n    try {\n      const userCredential = await (0, _firebaseAuth.createUserWithEmailAndPassword)(_configFirebase.auth, email, password);\n      const user = userCredential.user;\n\n      // Update display name\n      await (0, _firebaseAuth.updateProfile)(user, {\n        displayName\n      });\n\n      // Create user profile in Firestore\n      const userProfile = {\n        uid: user.uid,\n        email: user.email,\n        displayName,\n        role: 'admin',\n        createdAt: (0, _firebaseFirestore.serverTimestamp)(),\n        updatedAt: (0, _firebaseFirestore.serverTimestamp)()\n      };\n      await (0, _firebaseFirestore.setDoc)((0, _firebaseFirestore.doc)(_configFirebase.db, 'users', user.uid), userProfile);\n      return {\n        user,\n        profile: userProfile\n      };\n    } catch (error) {\n      throw new Error(error.message);\n    }\n  };\n\n  // Logout\n  const logoutUser = async () => {\n    await (0, _firebaseAuth.signOut)(_configFirebase.auth);\n  };\n\n  // Get current user profile\n  const getCurrentUserProfile = async uid => {\n    try {\n      const userDoc = await (0, _firebaseFirestore.getDoc)((0, _firebaseFirestore.doc)(_configFirebase.db, 'users', uid));\n      if (userDoc.exists()) {\n        return userDoc.data();\n      }\n      return null;\n    } catch (error) {\n      console.error('Error getting user profile:', error);\n      return null;\n    }\n  };\n\n  // Auth state listener\n  const onAuthChange = callback => {\n    return (0, _firebaseAuth.onAuthStateChanged)(_configFirebase.auth, callback);\n  };\n\n  // Seed superadmin account\n  // Note: Superadmin must be created manually in Firebase Auth Console first\n  // This function only creates the Firestore profile\n  const seedSuperAdmin = async () => {\n    try {\n      // We can't programmatically create Firebase Auth users on client side\n      // Superadmin needs to be created via Firebase Console or manually registered once\n      // This function just ensures the profile exists in Firestore after first login\n      console.log('Superadmin seeding handled on first login');\n    } catch (error) {\n      console.error('Error seeding superadmin:', error);\n    }\n  };\n});","lineCount":148,"map":[[7,2,26,0,"Object"],[7,8,26,0],[7,9,26,0,"defineProperty"],[7,23,26,0],[7,24,26,0,"exports"],[7,31,26,0],[8,4,26,0,"enumerable"],[8,14,26,0],[9,4,26,0,"get"],[9,7,26,0],[9,18,26,0,"get"],[9,19,26,0],[10,6,26,0],[10,13,26,0,"loginUser"],[10,22,26,0],[11,4,26,0],[12,2,26,0],[13,2,59,0,"Object"],[13,8,59,0],[13,9,59,0,"defineProperty"],[13,23,59,0],[13,24,59,0,"exports"],[13,31,59,0],[14,4,59,0,"enumerable"],[14,14,59,0],[15,4,59,0,"get"],[15,7,59,0],[15,18,59,0,"get"],[15,19,59,0],[16,6,59,0],[16,13,59,0,"registerAdmin"],[16,26,59,0],[17,4,59,0],[18,2,59,0],[19,2,91,0,"Object"],[19,8,91,0],[19,9,91,0,"defineProperty"],[19,23,91,0],[19,24,91,0,"exports"],[19,31,91,0],[20,4,91,0,"enumerable"],[20,14,91,0],[21,4,91,0,"get"],[21,7,91,0],[21,18,91,0,"get"],[21,19,91,0],[22,6,91,0],[22,13,91,0,"logoutUser"],[22,23,91,0],[23,4,91,0],[24,2,91,0],[25,2,96,0,"Object"],[25,8,96,0],[25,9,96,0,"defineProperty"],[25,23,96,0],[25,24,96,0,"exports"],[25,31,96,0],[26,4,96,0,"enumerable"],[26,14,96,0],[27,4,96,0,"get"],[27,7,96,0],[27,18,96,0,"get"],[27,19,96,0],[28,6,96,0],[28,13,96,0,"getCurrentUserProfile"],[28,34,96,0],[29,4,96,0],[30,2,96,0],[31,2,110,0,"Object"],[31,8,110,0],[31,9,110,0,"defineProperty"],[31,23,110,0],[31,24,110,0,"exports"],[31,31,110,0],[32,4,110,0,"enumerable"],[32,14,110,0],[33,4,110,0,"get"],[33,7,110,0],[33,18,110,0,"get"],[33,19,110,0],[34,6,110,0],[34,13,110,0,"onAuthChange"],[34,25,110,0],[35,4,110,0],[36,2,110,0],[37,2,117,0,"Object"],[37,8,117,0],[37,9,117,0,"defineProperty"],[37,23,117,0],[37,24,117,0,"exports"],[37,31,117,0],[38,4,117,0,"enumerable"],[38,14,117,0],[39,4,117,0,"get"],[39,7,117,0],[39,18,117,0,"get"],[39,19,117,0],[40,6,117,0],[40,13,117,0,"seedSuperAdmin"],[40,27,117,0],[41,4,117,0],[42,2,117,0],[43,2,1,0],[43,6,1,0,"_firebaseAuth"],[43,19,1,0],[43,22,1,0,"require"],[43,29,1,0],[43,30,1,0,"_dependencyMap"],[43,44,1,0],[44,2,9,0],[44,6,9,0,"_firebaseFirestore"],[44,24,9,0],[44,27,9,0,"require"],[44,34,9,0],[44,35,9,0,"_dependencyMap"],[44,49,9,0],[45,2,10,0],[45,6,10,0,"_configFirebase"],[45,21,10,0],[45,24,10,0,"require"],[45,31,10,0],[45,32,10,0,"_dependencyMap"],[45,46,10,0],[46,2,21,0],[47,2,22,0],[47,8,22,6,"SUPERADMIN_EMAIL"],[47,24,22,22],[47,27,22,25],[47,43,22,41],[48,2,23,0],[48,8,23,6,"SUPERADMIN_PASSWORD"],[48,27,23,25],[48,30,23,28],[48,45,23,43],[50,2,25,0],[51,2,26,7],[51,8,26,13,"loginUser"],[51,17,26,22],[51,20,26,25],[51,26,26,25,"loginUser"],[51,27,26,32,"email"],[51,32,26,45],[51,34,26,47,"password"],[51,42,26,63],[51,47,26,68],[52,4,27,2],[52,8,27,6],[53,6,28,4],[53,12,28,10,"userCredential"],[53,26,28,24],[53,29,28,27],[53,35,28,33],[53,39,28,33,"signInWithEmailAndPassword"],[53,52,28,59],[53,53,28,59,"signInWithEmailAndPassword"],[53,79,28,59],[53,81,28,60,"auth"],[53,96,28,64],[53,97,28,64,"auth"],[53,101,28,64],[53,103,28,66,"email"],[53,108,28,71],[53,110,28,73,"password"],[53,118,28,81],[53,119,28,82],[54,6,29,4],[54,12,29,10,"user"],[54,16,29,14],[54,19,29,17,"userCredential"],[54,33,29,31],[54,34,29,32,"user"],[54,38,29,36],[56,6,31,4],[57,6,32,4],[57,10,32,8,"userDoc"],[57,17,32,15],[57,20,32,18],[57,26,32,24],[57,30,32,24,"getDoc"],[57,48,32,30],[57,49,32,30,"getDoc"],[57,55,32,30],[57,57,32,31],[57,61,32,31,"doc"],[57,79,32,34],[57,80,32,34,"doc"],[57,83,32,34],[57,85,32,35,"db"],[57,100,32,37],[57,101,32,37,"db"],[57,103,32,37],[57,105,32,39],[57,112,32,46],[57,114,32,48,"user"],[57,118,32,52],[57,119,32,53,"uid"],[57,122,32,56],[57,123,32,57],[57,124,32,58],[59,6,34,4],[60,6,35,4],[60,10,35,8],[60,11,35,9,"userDoc"],[60,18,35,16],[60,19,35,17,"exists"],[60,25,35,23],[60,26,35,24],[60,27,35,25],[60,29,35,27],[61,8,36,6],[61,14,36,12,"newProfile"],[61,24,36,35],[61,27,36,38],[62,10,37,8,"uid"],[62,13,37,11],[62,15,37,13,"user"],[62,19,37,17],[62,20,37,18,"uid"],[62,23,37,21],[63,10,38,8,"email"],[63,15,38,13],[63,17,38,15,"user"],[63,21,38,19],[63,22,38,20,"email"],[63,27,38,26],[64,10,39,8,"displayName"],[64,21,39,19],[64,23,39,21,"email"],[64,28,39,26],[64,33,39,31,"SUPERADMIN_EMAIL"],[64,49,39,47],[64,52,39,50],[64,65,39,63],[64,68,39,66,"user"],[64,72,39,70],[64,73,39,71,"displayName"],[64,84,39,82],[64,88,39,86],[64,100,39,98],[65,10,40,8,"role"],[65,14,40,12],[65,16,40,14,"email"],[65,21,40,19],[65,26,40,24,"SUPERADMIN_EMAIL"],[65,42,40,40],[65,45,40,43],[65,57,40,55],[65,60,40,58],[65,67,40,65],[66,10,41,8,"createdAt"],[66,19,41,17],[66,21,41,19],[66,25,41,19,"serverTimestamp"],[66,43,41,34],[66,44,41,34,"serverTimestamp"],[66,59,41,34],[66,61,41,35],[66,62,41,36],[67,10,42,8,"updatedAt"],[67,19,42,17],[67,21,42,19],[67,25,42,19,"serverTimestamp"],[67,43,42,34],[67,44,42,34,"serverTimestamp"],[67,59,42,34],[67,61,42,35],[68,8,43,6],[68,9,43,7],[69,8,45,6],[69,14,45,12],[69,18,45,12,"setDoc"],[69,36,45,18],[69,37,45,18,"setDoc"],[69,43,45,18],[69,45,45,19],[69,49,45,19,"doc"],[69,67,45,22],[69,68,45,22,"doc"],[69,71,45,22],[69,73,45,23,"db"],[69,88,45,25],[69,89,45,25,"db"],[69,91,45,25],[69,93,45,27],[69,100,45,34],[69,102,45,36,"user"],[69,106,45,40],[69,107,45,41,"uid"],[69,110,45,44],[69,111,45,45],[69,113,45,47,"newProfile"],[69,123,45,57],[69,124,45,58],[70,8,46,6,"userDoc"],[70,15,46,13],[70,18,46,16],[70,24,46,22],[70,28,46,22,"getDoc"],[70,46,46,28],[70,47,46,28,"getDoc"],[70,53,46,28],[70,55,46,29],[70,59,46,29,"doc"],[70,77,46,32],[70,78,46,32,"doc"],[70,81,46,32],[70,83,46,33,"db"],[70,98,46,35],[70,99,46,35,"db"],[70,101,46,35],[70,103,46,37],[70,110,46,44],[70,112,46,46,"user"],[70,116,46,50],[70,117,46,51,"uid"],[70,120,46,54],[70,121,46,55],[70,122,46,56],[71,6,47,4],[72,6,49,4],[72,13,49,11],[73,8,50,6,"user"],[73,12,50,10],[74,8,51,6,"profile"],[74,15,51,13],[74,17,51,15,"userDoc"],[74,24,51,22],[74,25,51,23,"data"],[74,29,51,27],[74,30,51,28],[75,6,52,4],[75,7,52,5],[76,4,53,2],[76,5,53,3],[76,6,53,4],[76,13,53,11,"error"],[76,18,53,21],[76,20,53,23],[77,6,54,4],[77,12,54,10],[77,16,54,14,"Error"],[77,21,54,19],[77,22,54,20,"error"],[77,27,54,25],[77,28,54,26,"message"],[77,35,54,33],[77,36,54,34],[78,4,55,2],[79,2,56,0],[79,3,56,1],[81,2,58,0],[82,2,59,7],[82,8,59,13,"registerAdmin"],[82,21,59,26],[82,24,59,29],[82,30,59,29,"registerAdmin"],[82,31,60,2,"email"],[82,36,60,15],[82,38,61,2,"password"],[82,46,61,18],[82,48,62,2,"displayName"],[82,59,62,21],[82,61,63,2,"createdBy"],[82,70,63,19],[82,75,64,5],[83,4,65,2],[83,8,65,6],[84,6,66,4],[84,12,66,10,"userCredential"],[84,26,66,24],[84,29,66,27],[84,35,66,33],[84,39,66,33,"createUserWithEmailAndPassword"],[84,52,66,63],[84,53,66,63,"createUserWithEmailAndPassword"],[84,83,66,63],[84,85,66,64,"auth"],[84,100,66,68],[84,101,66,68,"auth"],[84,105,66,68],[84,107,66,70,"email"],[84,112,66,75],[84,114,66,77,"password"],[84,122,66,85],[84,123,66,86],[85,6,67,4],[85,12,67,10,"user"],[85,16,67,14],[85,19,67,17,"userCredential"],[85,33,67,31],[85,34,67,32,"user"],[85,38,67,36],[87,6,69,4],[88,6,70,4],[88,12,70,10],[88,16,70,10,"updateProfile"],[88,29,70,23],[88,30,70,23,"updateProfile"],[88,43,70,23],[88,45,70,24,"user"],[88,49,70,28],[88,51,70,30],[89,8,70,32,"displayName"],[90,6,70,44],[90,7,70,45],[90,8,70,46],[92,6,72,4],[93,6,73,4],[93,12,73,10,"userProfile"],[93,23,73,34],[93,26,73,37],[94,8,74,6,"uid"],[94,11,74,9],[94,13,74,11,"user"],[94,17,74,15],[94,18,74,16,"uid"],[94,21,74,19],[95,8,75,6,"email"],[95,13,75,11],[95,15,75,13,"user"],[95,19,75,17],[95,20,75,18,"email"],[95,25,75,24],[96,8,76,6,"displayName"],[96,19,76,17],[97,8,77,6,"role"],[97,12,77,10],[97,14,77,12],[97,21,77,19],[98,8,78,6,"createdAt"],[98,17,78,15],[98,19,78,17],[98,23,78,17,"serverTimestamp"],[98,41,78,32],[98,42,78,32,"serverTimestamp"],[98,57,78,32],[98,59,78,33],[98,60,78,34],[99,8,79,6,"updatedAt"],[99,17,79,15],[99,19,79,17],[99,23,79,17,"serverTimestamp"],[99,41,79,32],[99,42,79,32,"serverTimestamp"],[99,57,79,32],[99,59,79,33],[100,6,80,4],[100,7,80,5],[101,6,82,4],[101,12,82,10],[101,16,82,10,"setDoc"],[101,34,82,16],[101,35,82,16,"setDoc"],[101,41,82,16],[101,43,82,17],[101,47,82,17,"doc"],[101,65,82,20],[101,66,82,20,"doc"],[101,69,82,20],[101,71,82,21,"db"],[101,86,82,23],[101,87,82,23,"db"],[101,89,82,23],[101,91,82,25],[101,98,82,32],[101,100,82,34,"user"],[101,104,82,38],[101,105,82,39,"uid"],[101,108,82,42],[101,109,82,43],[101,111,82,45,"userProfile"],[101,122,82,56],[101,123,82,57],[102,6,84,4],[102,13,84,11],[103,8,84,13,"user"],[103,12,84,17],[104,8,84,19,"profile"],[104,15,84,26],[104,17,84,28,"userProfile"],[105,6,84,40],[105,7,84,41],[106,4,85,2],[106,5,85,3],[106,6,85,4],[106,13,85,11,"error"],[106,18,85,21],[106,20,85,23],[107,6,86,4],[107,12,86,10],[107,16,86,14,"Error"],[107,21,86,19],[107,22,86,20,"error"],[107,27,86,25],[107,28,86,26,"message"],[107,35,86,33],[107,36,86,34],[108,4,87,2],[109,2,88,0],[109,3,88,1],[111,2,90,0],[112,2,91,7],[112,8,91,13,"logoutUser"],[112,18,91,23],[112,21,91,26],[112,27,91,26,"logoutUser"],[112,28,91,26],[112,33,91,38],[113,4,92,2],[113,10,92,8],[113,14,92,8,"signOut"],[113,27,92,15],[113,28,92,15,"signOut"],[113,35,92,15],[113,37,92,16,"auth"],[113,52,92,20],[113,53,92,20,"auth"],[113,57,92,20],[113,58,92,21],[114,2,93,0],[114,3,93,1],[116,2,95,0],[117,2,96,7],[117,8,96,13,"getCurrentUserProfile"],[117,29,96,34],[117,32,96,37],[117,38,96,44,"uid"],[117,41,96,55],[117,45,96,89],[118,4,97,2],[118,8,97,6],[119,6,98,4],[119,12,98,10,"userDoc"],[119,19,98,17],[119,22,98,20],[119,28,98,26],[119,32,98,26,"getDoc"],[119,50,98,32],[119,51,98,32,"getDoc"],[119,57,98,32],[119,59,98,33],[119,63,98,33,"doc"],[119,81,98,36],[119,82,98,36,"doc"],[119,85,98,36],[119,87,98,37,"db"],[119,102,98,39],[119,103,98,39,"db"],[119,105,98,39],[119,107,98,41],[119,114,98,48],[119,116,98,50,"uid"],[119,119,98,53],[119,120,98,54],[119,121,98,55],[120,6,99,4],[120,10,99,8,"userDoc"],[120,17,99,15],[120,18,99,16,"exists"],[120,24,99,22],[120,25,99,23],[120,26,99,24],[120,28,99,26],[121,8,100,6],[121,15,100,13,"userDoc"],[121,22,100,20],[121,23,100,21,"data"],[121,27,100,25],[121,28,100,26],[121,29,100,27],[122,6,101,4],[123,6,102,4],[123,13,102,11],[123,17,102,15],[124,4,103,2],[124,5,103,3],[124,6,103,4],[124,13,103,11,"error"],[124,18,103,16],[124,20,103,18],[125,6,104,4,"console"],[125,13,104,11],[125,14,104,12,"error"],[125,19,104,17],[125,20,104,18],[125,49,104,47],[125,51,104,49,"error"],[125,56,104,54],[125,57,104,55],[126,6,105,4],[126,13,105,11],[126,17,105,15],[127,4,106,2],[128,2,107,0],[128,3,107,1],[130,2,109,0],[131,2,110,7],[131,8,110,13,"onAuthChange"],[131,20,110,25],[131,23,110,29,"callback"],[131,31,110,66],[131,35,110,71],[132,4,111,2],[132,11,111,9],[132,15,111,9,"onAuthStateChanged"],[132,28,111,27],[132,29,111,27,"onAuthStateChanged"],[132,47,111,27],[132,49,111,28,"auth"],[132,64,111,32],[132,65,111,32,"auth"],[132,69,111,32],[132,71,111,34,"callback"],[132,79,111,42],[132,80,111,43],[133,2,112,0],[133,3,112,1],[135,2,114,0],[136,2,115,0],[137,2,116,0],[138,2,117,7],[138,8,117,13,"seedSuperAdmin"],[138,22,117,27],[138,25,117,30],[138,31,117,30,"seedSuperAdmin"],[138,32,117,30],[138,37,117,42],[139,4,118,2],[139,8,118,6],[140,6,119,4],[141,6,120,4],[142,6,121,4],[143,6,122,4,"console"],[143,13,122,11],[143,14,122,12,"log"],[143,17,122,15],[143,18,122,16],[143,61,122,59],[143,62,122,60],[144,4,123,2],[144,5,123,3],[144,6,123,4],[144,13,123,11,"error"],[144,18,123,16],[144,20,123,18],[145,6,124,4,"console"],[145,13,124,11],[145,14,124,12,"error"],[145,19,124,17],[145,20,124,18],[145,47,124,45],[145,49,124,47,"error"],[145,54,124,52],[145,55,124,53],[146,4,125,2],[147,2,126,0],[147,3,126,1],[148,0,126,2],[148,3]],"functionMap":{"names":["<global>","loginUser","registerAdmin","logoutUser","getCurrentUserProfile","onAuthChange","seedSuperAdmin"],"mappings":"AAA;yBCyB;CD8B;6BEG;CF6B;0BGG;CHE;qCIG;CJW;4BKG;CLE;8BMK;CNS"},"hasCjsExports":false},"type":"js/module"}]}